{"ast":null,"code":"import _objectSpread from \"/Applications/XAMPP/xamppfiles/htdocs/neus/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { createVNode as _createVNode } from \"vue\";\n// Composables\nimport { makeComponentProps } from \"../../composables/component.mjs\";\nimport { createForm, makeFormProps } from \"../../composables/form.mjs\";\nimport { forwardRefs } from \"../../composables/forwardRefs.mjs\"; // Utilities\nimport { ref } from 'vue';\nimport { genericComponent, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport var makeVFormProps = propsFactory(_objectSpread(_objectSpread({}, makeComponentProps()), makeFormProps()), 'VForm');\nexport var VForm = genericComponent()({\n  name: 'VForm',\n  props: makeVFormProps(),\n  emits: {\n    'update:modelValue': function updateModelValue(val) {\n      return true;\n    },\n    submit: function submit(e) {\n      return true;\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n      emit = _ref.emit;\n    var form = createForm(props);\n    var formRef = ref();\n    function onReset(e) {\n      e.preventDefault();\n      form.reset();\n    }\n    function onSubmit(_e) {\n      var e = _e;\n      var ready = form.validate();\n      e.then = ready.then.bind(ready);\n      e[\"catch\"] = ready[\"catch\"].bind(ready);\n      e[\"finally\"] = ready[\"finally\"].bind(ready);\n      emit('submit', e);\n      if (!e.defaultPrevented) {\n        ready.then(function (_ref2) {\n          var valid = _ref2.valid;\n          if (valid) {\n            var _formRef$value;\n            (_formRef$value = formRef.value) === null || _formRef$value === void 0 || _formRef$value.submit();\n          }\n        });\n      }\n      e.preventDefault();\n    }\n    useRender(function () {\n      var _slots$default;\n      return _createVNode(\"form\", {\n        \"ref\": formRef,\n        \"class\": ['v-form', props[\"class\"]],\n        \"style\": props.style,\n        \"novalidate\": true,\n        \"onReset\": onReset,\n        \"onSubmit\": onSubmit\n      }, [(_slots$default = slots[\"default\"]) === null || _slots$default === void 0 ? void 0 : _slots$default.call(slots, form)]);\n    });\n    return forwardRefs(form, formRef);\n  }\n});","map":{"version":3,"names":["makeComponentProps","createForm","makeFormProps","forwardRefs","ref","genericComponent","propsFactory","useRender","makeVFormProps","_objectSpread","VForm","name","props","emits","updateModelValue","val","submit","e","setup","_ref","slots","emit","form","formRef","onReset","preventDefault","reset","onSubmit","_e","ready","validate","then","bind","defaultPrevented","_ref2","valid","_formRef$value","value","_slots$default","_createVNode","style","call"],"sources":["../../../src/components/VForm/VForm.tsx"],"sourcesContent":["// Composables\nimport { makeComponentProps } from '@/composables/component'\nimport { createForm, makeFormProps } from '@/composables/form'\nimport { forwardRefs } from '@/composables/forwardRefs'\n\n// Utilities\nimport { ref } from 'vue'\nimport { genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { SubmitEventPromise } from '@/composables/form'\n\nexport const makeVFormProps = propsFactory({\n  ...makeComponentProps(),\n  ...makeFormProps(),\n}, 'VForm')\n\ntype VFormSlots = {\n  default: ReturnType<typeof createForm>\n}\n\nexport const VForm = genericComponent<VFormSlots>()({\n  name: 'VForm',\n\n  props: makeVFormProps(),\n\n  emits: {\n    'update:modelValue': (val: boolean | null) => true,\n    submit: (e: SubmitEventPromise) => true,\n  },\n\n  setup (props, { slots, emit }) {\n    const form = createForm(props)\n    const formRef = ref<HTMLFormElement>()\n\n    function onReset (e: Event) {\n      e.preventDefault()\n      form.reset()\n    }\n\n    function onSubmit (_e: Event) {\n      const e = _e as SubmitEventPromise\n\n      const ready = form.validate()\n      e.then = ready.then.bind(ready)\n      e.catch = ready.catch.bind(ready)\n      e.finally = ready.finally.bind(ready)\n\n      emit('submit', e)\n\n      if (!e.defaultPrevented) {\n        ready.then(({ valid }) => {\n          if (valid) {\n            formRef.value?.submit()\n          }\n        })\n      }\n\n      e.preventDefault()\n    }\n\n    useRender(() => ((\n      <form\n        ref={ formRef }\n        class={[\n          'v-form',\n          props.class,\n        ]}\n        style={ props.style }\n        novalidate\n        onReset={ onReset }\n        onSubmit={ onSubmit }\n      >\n        { slots.default?.(form) }\n      </form>\n    )))\n\n    return forwardRefs(form, formRef)\n  },\n})\n\nexport type VForm = InstanceType<typeof VForm>\n"],"mappings":";;;;AAAA;AAAA,SACSA,kBAAkB;AAAA,SAClBC,UAAU,EAAEC,aAAa;AAAA,SACzBC,WAAW,6CAEpB;AACA,SAASC,GAAG,QAAQ,KAAK;AAAA,SAChBC,gBAAgB,EAAEC,YAAY,EAAEC,SAAS,gCAElD;AAGA,OAAO,IAAMC,cAAc,GAAGF,YAAY,CAAAG,aAAA,CAAAA,aAAA,KACrCT,kBAAkB,CAAC,CAAC,GACpBE,aAAa,CAAC,IAChB,OAAO,CAAC;AAMX,OAAO,IAAMQ,KAAK,GAAGL,gBAAgB,CAAa,CAAC,CAAC;EAClDM,IAAI,EAAE,OAAO;EAEbC,KAAK,EAAEJ,cAAc,CAAC,CAAC;EAEvBK,KAAK,EAAE;IACL,mBAAmB,EAAG,SAAAC,iBAAAC,GAAmB;MAAA,OAAK,IAAI;IAAA;IAClDC,MAAM,EAAG,SAAAA,OAAAC,CAAqB;MAAA,OAAK;IAAA;EACrC,CAAC;EAEDC,KAAK,WAAAA,MAAEN,KAAK,EAAAO,IAAA,EAAmB;IAAA,IAAfC,KAAK,GAAQD,IAAA,CAAbC,KAAK;MAAEC,IAAA,GAAMF,IAAA,CAANE,IAAA;IACrB,IAAMC,IAAI,GAAGrB,UAAU,CAACW,KAAK,CAAC;IAC9B,IAAMW,OAAO,GAAGnB,GAAG,CAAkB,CAAC;IAEtC,SAASoB,OAAOA,CAAEP,CAAQ,EAAE;MAC1BA,CAAC,CAACQ,cAAc,CAAC,CAAC;MAClBH,IAAI,CAACI,KAAK,CAAC,CAAC;IACd;IAEA,SAASC,QAAQA,CAAEC,EAAS,EAAE;MAC5B,IAAMX,CAAC,GAAGW,EAAwB;MAElC,IAAMC,KAAK,GAAGP,IAAI,CAACQ,QAAQ,CAAC,CAAC;MAC7Bb,CAAC,CAACc,IAAI,GAAGF,KAAK,CAACE,IAAI,CAACC,IAAI,CAACH,KAAK,CAAC;MAC/BZ,CAAC,SAAM,GAAGY,KAAK,SAAM,CAACG,IAAI,CAACH,KAAK,CAAC;MACjCZ,CAAC,WAAQ,GAAGY,KAAK,WAAQ,CAACG,IAAI,CAACH,KAAK,CAAC;MAErCR,IAAI,CAAC,QAAQ,EAAEJ,CAAC,CAAC;MAEjB,IAAI,CAACA,CAAC,CAACgB,gBAAgB,EAAE;QACvBJ,KAAK,CAACE,IAAI,CAAC,UAAAG,KAAA,EAAe;UAAA,IAAZC,KAAA,GAAOD,KAAA,CAAPC,KAAA;UACZ,IAAIA,KAAK,EAAE;YAAA,IAAAC,cAAA;YACT,CAAAA,cAAA,GAAAb,OAAO,CAACc,KAAK,cAAAD,cAAA,eAAbA,cAAA,CAAepB,MAAM,CAAC,CAAC;UACzB;QACF,CAAC,CAAC;MACJ;MAEAC,CAAC,CAACQ,cAAc,CAAC,CAAC;IACpB;IAEAlB,SAAS,CAAC;MAAA,IAAA+B,cAAA;MAAA,OAAAC,YAAA;QAAA,OAEAhB,OAAO;QAAA,SACN,CACL,QAAQ,EACRX,KAAK,SAAM,CACZ;QAAA,SACOA,KAAK,CAAC4B,KAAK;QAAA;QAAA,WAEThB,OAAO;QAAA,YACNG;MAAQ,KAAAW,cAAA,GAEjBlB,KAAK,WAAQ,cAAAkB,cAAA,uBAAbA,cAAA,CAAAG,IAAA,CAAArB,KAAK,EAAWE,IAAI,CAAC,EAEzB;IAAA,EAAC;IAEH,OAAOnB,WAAW,CAACmB,IAAI,EAAEC,OAAO,CAAC;EACnC;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}