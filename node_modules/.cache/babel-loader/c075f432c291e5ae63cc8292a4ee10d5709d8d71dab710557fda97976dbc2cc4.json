{"ast":null,"code":"import _objectSpread from \"/Applications/XAMPP/xamppfiles/htdocs/neus/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.is-array.js\";\n// Components\nimport { VMenuSymbol } from \"../VMenu/shared.mjs\"; // Composables\nimport { makeDelayProps, useDelay } from \"../../composables/delay.mjs\"; // Utilities\nimport { computed, effectScope, inject, mergeProps, nextTick, onScopeDispose, ref, watch, watchEffect } from 'vue';\nimport { bindProps, getCurrentInstance, IN_BROWSER, matchesSelector, propsFactory, refElement, unbindProps } from \"../../util/index.mjs\"; // Types\nexport var makeActivatorProps = propsFactory(_objectSpread({\n  target: [String, Object],\n  activator: [String, Object],\n  activatorProps: {\n    type: Object,\n    \"default\": function _default() {\n      return {};\n    }\n  },\n  openOnClick: {\n    type: Boolean,\n    \"default\": undefined\n  },\n  openOnHover: Boolean,\n  openOnFocus: {\n    type: Boolean,\n    \"default\": undefined\n  },\n  closeOnContentClick: Boolean\n}, makeDelayProps()), 'VOverlay-activator');\nexport function useActivator(props, _ref) {\n  var isActive = _ref.isActive,\n    isTop = _ref.isTop;\n  var vm = getCurrentInstance('useActivator');\n  var activatorEl = ref();\n  var isHovered = false;\n  var isFocused = false;\n  var firstEnter = true;\n  var openOnFocus = computed(function () {\n    return props.openOnFocus || props.openOnFocus == null && props.openOnHover;\n  });\n  var openOnClick = computed(function () {\n    return props.openOnClick || props.openOnClick == null && !props.openOnHover && !openOnFocus.value;\n  });\n  var _useDelay = useDelay(props, function (value) {\n      if (value === (props.openOnHover && isHovered || openOnFocus.value && isFocused) && !(props.openOnHover && isActive.value && !isTop.value)) {\n        if (isActive.value !== value) {\n          firstEnter = true;\n        }\n        isActive.value = value;\n      }\n    }),\n    runOpenDelay = _useDelay.runOpenDelay,\n    runCloseDelay = _useDelay.runCloseDelay;\n  var cursorTarget = ref();\n  var availableEvents = {\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      activatorEl.value = e.currentTarget || e.target;\n      if (!isActive.value) {\n        cursorTarget.value = [e.clientX, e.clientY];\n      }\n      isActive.value = !isActive.value;\n    },\n    onMouseenter: function onMouseenter(e) {\n      var _e$sourceCapabilities;\n      if ((_e$sourceCapabilities = e.sourceCapabilities) !== null && _e$sourceCapabilities !== void 0 && _e$sourceCapabilities.firesTouchEvents) return;\n      isHovered = true;\n      activatorEl.value = e.currentTarget || e.target;\n      runOpenDelay();\n    },\n    onMouseleave: function onMouseleave(e) {\n      isHovered = false;\n      runCloseDelay();\n    },\n    onFocus: function onFocus(e) {\n      if (matchesSelector(e.target, ':focus-visible') === false) return;\n      isFocused = true;\n      e.stopPropagation();\n      activatorEl.value = e.currentTarget || e.target;\n      runOpenDelay();\n    },\n    onBlur: function onBlur(e) {\n      isFocused = false;\n      e.stopPropagation();\n      runCloseDelay();\n    }\n  };\n  var activatorEvents = computed(function () {\n    var events = {};\n    if (openOnClick.value) {\n      events.onClick = availableEvents.onClick;\n    }\n    if (props.openOnHover) {\n      events.onMouseenter = availableEvents.onMouseenter;\n      events.onMouseleave = availableEvents.onMouseleave;\n    }\n    if (openOnFocus.value) {\n      events.onFocus = availableEvents.onFocus;\n      events.onBlur = availableEvents.onBlur;\n    }\n    return events;\n  });\n  var contentEvents = computed(function () {\n    var events = {};\n    if (props.openOnHover) {\n      events.onMouseenter = function () {\n        isHovered = true;\n        runOpenDelay();\n      };\n      events.onMouseleave = function () {\n        isHovered = false;\n        runCloseDelay();\n      };\n    }\n    if (openOnFocus.value) {\n      events.onFocusin = function () {\n        isFocused = true;\n        runOpenDelay();\n      };\n      events.onFocusout = function () {\n        isFocused = false;\n        runCloseDelay();\n      };\n    }\n    if (props.closeOnContentClick) {\n      var menu = inject(VMenuSymbol, null);\n      events.onClick = function () {\n        isActive.value = false;\n        menu === null || menu === void 0 || menu.closeParents();\n      };\n    }\n    return events;\n  });\n  var scrimEvents = computed(function () {\n    var events = {};\n    if (props.openOnHover) {\n      events.onMouseenter = function () {\n        if (firstEnter) {\n          isHovered = true;\n          firstEnter = false;\n          runOpenDelay();\n        }\n      };\n      events.onMouseleave = function () {\n        isHovered = false;\n        runCloseDelay();\n      };\n    }\n    return events;\n  });\n  watch(isTop, function (val) {\n    if (val && (props.openOnHover && !isHovered && (!openOnFocus.value || !isFocused) || openOnFocus.value && !isFocused && (!props.openOnHover || !isHovered))) {\n      isActive.value = false;\n    }\n  });\n  watch(isActive, function (val) {\n    if (!val) {\n      setTimeout(function () {\n        cursorTarget.value = undefined;\n      });\n    }\n  }, {\n    flush: 'post'\n  });\n  var activatorRef = ref();\n  watchEffect(function () {\n    if (!activatorRef.value) return;\n    nextTick(function () {\n      activatorEl.value = refElement(activatorRef.value);\n    });\n  });\n  var targetRef = ref();\n  var target = computed(function () {\n    if (props.target === 'cursor' && cursorTarget.value) return cursorTarget.value;\n    if (targetRef.value) return refElement(targetRef.value);\n    return getTarget(props.target, vm) || activatorEl.value;\n  });\n  var targetEl = computed(function () {\n    return Array.isArray(target.value) ? undefined : target.value;\n  });\n  var scope;\n  watch(function () {\n    return !!props.activator;\n  }, function (val) {\n    if (val && IN_BROWSER) {\n      scope = effectScope();\n      scope.run(function () {\n        _useActivator(props, vm, {\n          activatorEl: activatorEl,\n          activatorEvents: activatorEvents\n        });\n      });\n    } else if (scope) {\n      scope.stop();\n    }\n  }, {\n    flush: 'post',\n    immediate: true\n  });\n  onScopeDispose(function () {\n    var _scope;\n    (_scope = scope) === null || _scope === void 0 || _scope.stop();\n  });\n  return {\n    activatorEl: activatorEl,\n    activatorRef: activatorRef,\n    target: target,\n    targetEl: targetEl,\n    targetRef: targetRef,\n    activatorEvents: activatorEvents,\n    contentEvents: contentEvents,\n    scrimEvents: scrimEvents\n  };\n}\nfunction _useActivator(props, vm, _ref2) {\n  var activatorEl = _ref2.activatorEl,\n    activatorEvents = _ref2.activatorEvents;\n  watch(function () {\n    return props.activator;\n  }, function (val, oldVal) {\n    if (oldVal && val !== oldVal) {\n      var activator = getActivator(oldVal);\n      activator && unbindActivatorProps(activator);\n    }\n    if (val) {\n      nextTick(function () {\n        return bindActivatorProps();\n      });\n    }\n  }, {\n    immediate: true\n  });\n  watch(function () {\n    return props.activatorProps;\n  }, function () {\n    bindActivatorProps();\n  });\n  onScopeDispose(function () {\n    unbindActivatorProps();\n  });\n  function bindActivatorProps() {\n    var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getActivator();\n    var _props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : props.activatorProps;\n    if (!el) return;\n    bindProps(el, mergeProps(activatorEvents.value, _props));\n  }\n  function unbindActivatorProps() {\n    var el = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getActivator();\n    var _props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : props.activatorProps;\n    if (!el) return;\n    unbindProps(el, mergeProps(activatorEvents.value, _props));\n  }\n  function getActivator() {\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : props.activator;\n    var activator = getTarget(selector, vm);\n\n    // The activator should only be a valid element (Ignore comments and text nodes)\n    activatorEl.value = (activator === null || activator === void 0 ? void 0 : activator.nodeType) === Node.ELEMENT_NODE ? activator : undefined;\n    return activatorEl.value;\n  }\n}\nfunction getTarget(selector, vm) {\n  if (!selector) return;\n  var target;\n  if (selector === 'parent') {\n    var _vm$proxy;\n    var el = vm === null || vm === void 0 || (_vm$proxy = vm.proxy) === null || _vm$proxy === void 0 || (_vm$proxy = _vm$proxy.$el) === null || _vm$proxy === void 0 ? void 0 : _vm$proxy.parentNode;\n    while ((_el = el) !== null && _el !== void 0 && _el.hasAttribute('data-no-activator')) {\n      var _el;\n      el = el.parentNode;\n    }\n    target = el;\n  } else if (typeof selector === 'string') {\n    // Selector\n    target = document.querySelector(selector);\n  } else if ('$el' in selector) {\n    // Component (ref)\n    target = selector.$el;\n  } else {\n    // HTMLElement | Element | [x, y]\n    target = selector;\n  }\n  return target;\n}","map":{"version":3,"names":["VMenuSymbol","makeDelayProps","useDelay","computed","effectScope","inject","mergeProps","nextTick","onScopeDispose","ref","watch","watchEffect","bindProps","getCurrentInstance","IN_BROWSER","matchesSelector","propsFactory","refElement","unbindProps","makeActivatorProps","_objectSpread","target","String","Object","activator","activatorProps","type","_default","openOnClick","Boolean","undefined","openOnHover","openOnFocus","closeOnContentClick","useActivator","props","_ref","isActive","isTop","vm","activatorEl","isHovered","isFocused","firstEnter","value","_useDelay","runOpenDelay","runCloseDelay","cursorTarget","availableEvents","onClick","e","stopPropagation","currentTarget","clientX","clientY","onMouseenter","_e$sourceCapabilities","sourceCapabilities","firesTouchEvents","onMouseleave","onFocus","onBlur","activatorEvents","events","contentEvents","onFocusin","onFocusout","menu","closeParents","scrimEvents","val","setTimeout","flush","activatorRef","targetRef","getTarget","targetEl","Array","isArray","scope","run","_useActivator","stop","immediate","_scope","_ref2","oldVal","getActivator","unbindActivatorProps","bindActivatorProps","el","arguments","length","_props","selector","nodeType","Node","ELEMENT_NODE","_vm$proxy","proxy","$el","parentNode","_el","hasAttribute","document","querySelector"],"sources":["../../../src/components/VOverlay/useActivator.tsx"],"sourcesContent":["// Components\nimport { VMenuSymbol } from '@/components/VMenu/shared'\n\n// Composables\nimport { makeDelayProps, useDelay } from '@/composables/delay'\n\n// Utilities\nimport {\n  computed,\n  effectScope,\n  inject,\n  mergeProps,\n  nextTick,\n  onScopeDispose,\n  ref,\n  watch,\n  watchEffect,\n} from 'vue'\nimport {\n  bindProps,\n  getCurrentInstance,\n  IN_BROWSER,\n  matchesSelector,\n  propsFactory,\n  refElement,\n  unbindProps,\n} from '@/util'\n\n// Types\nimport type {\n  ComponentInternalInstance,\n  ComponentPublicInstance,\n  EffectScope,\n  PropType,\n  Ref,\n} from 'vue'\nimport type { DelayProps } from '@/composables/delay'\n\ninterface ActivatorProps extends DelayProps {\n  target: 'parent' | 'cursor' | (string & {}) | Element | ComponentPublicInstance | [x: number, y: number] | undefined\n  activator: 'parent' | (string & {}) | Element | ComponentPublicInstance | undefined\n  activatorProps: Record<string, any>\n\n  openOnClick: boolean | undefined\n  openOnHover: boolean\n  openOnFocus: boolean | undefined\n\n  closeOnContentClick: boolean\n}\n\nexport const makeActivatorProps = propsFactory({\n  target: [String, Object] as PropType<ActivatorProps['target']>,\n  activator: [String, Object] as PropType<ActivatorProps['activator']>,\n  activatorProps: {\n    type: Object as PropType<ActivatorProps['activatorProps']>,\n    default: () => ({}),\n  },\n\n  openOnClick: {\n    type: Boolean,\n    default: undefined,\n  },\n  openOnHover: Boolean,\n  openOnFocus: {\n    type: Boolean,\n    default: undefined,\n  },\n\n  closeOnContentClick: Boolean,\n\n  ...makeDelayProps(),\n}, 'VOverlay-activator')\n\nexport function useActivator (\n  props: ActivatorProps,\n  { isActive, isTop }: { isActive: Ref<boolean>, isTop: Ref<boolean> }\n) {\n  const vm = getCurrentInstance('useActivator')\n  const activatorEl = ref<HTMLElement>()\n\n  let isHovered = false\n  let isFocused = false\n  let firstEnter = true\n\n  const openOnFocus = computed(() => props.openOnFocus || (props.openOnFocus == null && props.openOnHover))\n  const openOnClick = computed(() => props.openOnClick || (props.openOnClick == null && !props.openOnHover && !openOnFocus.value))\n\n  const { runOpenDelay, runCloseDelay } = useDelay(props, value => {\n    if (\n      value === (\n        (props.openOnHover && isHovered) ||\n        (openOnFocus.value && isFocused)\n      ) && !(props.openOnHover && isActive.value && !isTop.value)\n    ) {\n      if (isActive.value !== value) {\n        firstEnter = true\n      }\n      isActive.value = value\n    }\n  })\n\n  const cursorTarget = ref<[x: number, y: number]>()\n  const availableEvents = {\n    onClick: (e: MouseEvent) => {\n      e.stopPropagation()\n      activatorEl.value = (e.currentTarget || e.target) as HTMLElement\n      if (!isActive.value) {\n        cursorTarget.value = [e.clientX, e.clientY]\n      }\n      isActive.value = !isActive.value\n    },\n    onMouseenter: (e: MouseEvent) => {\n      if (e.sourceCapabilities?.firesTouchEvents) return\n\n      isHovered = true\n      activatorEl.value = (e.currentTarget || e.target) as HTMLElement\n      runOpenDelay()\n    },\n    onMouseleave: (e: MouseEvent) => {\n      isHovered = false\n      runCloseDelay()\n    },\n    onFocus: (e: FocusEvent) => {\n      if (matchesSelector(e.target as HTMLElement, ':focus-visible') === false) return\n\n      isFocused = true\n      e.stopPropagation()\n      activatorEl.value = (e.currentTarget || e.target) as HTMLElement\n\n      runOpenDelay()\n    },\n    onBlur: (e: FocusEvent) => {\n      isFocused = false\n      e.stopPropagation()\n\n      runCloseDelay()\n    },\n  }\n\n  const activatorEvents = computed(() => {\n    const events: Partial<typeof availableEvents> = {}\n\n    if (openOnClick.value) {\n      events.onClick = availableEvents.onClick\n    }\n    if (props.openOnHover) {\n      events.onMouseenter = availableEvents.onMouseenter\n      events.onMouseleave = availableEvents.onMouseleave\n    }\n    if (openOnFocus.value) {\n      events.onFocus = availableEvents.onFocus\n      events.onBlur = availableEvents.onBlur\n    }\n\n    return events\n  })\n\n  const contentEvents = computed(() => {\n    const events: Record<string, EventListener> = {}\n\n    if (props.openOnHover) {\n      events.onMouseenter = () => {\n        isHovered = true\n        runOpenDelay()\n      }\n      events.onMouseleave = () => {\n        isHovered = false\n        runCloseDelay()\n      }\n    }\n\n    if (openOnFocus.value) {\n      events.onFocusin = () => {\n        isFocused = true\n        runOpenDelay()\n      }\n      events.onFocusout = () => {\n        isFocused = false\n        runCloseDelay()\n      }\n    }\n\n    if (props.closeOnContentClick) {\n      const menu = inject(VMenuSymbol, null)\n      events.onClick = () => {\n        isActive.value = false\n        menu?.closeParents()\n      }\n    }\n\n    return events\n  })\n\n  const scrimEvents = computed(() => {\n    const events: Record<string, EventListener> = {}\n\n    if (props.openOnHover) {\n      events.onMouseenter = () => {\n        if (firstEnter) {\n          isHovered = true\n          firstEnter = false\n          runOpenDelay()\n        }\n      }\n      events.onMouseleave = () => {\n        isHovered = false\n        runCloseDelay()\n      }\n    }\n\n    return events\n  })\n\n  watch(isTop, val => {\n    if (val && (\n      (props.openOnHover && !isHovered && (!openOnFocus.value || !isFocused)) ||\n      (openOnFocus.value && !isFocused && (!props.openOnHover || !isHovered))\n    )) {\n      isActive.value = false\n    }\n  })\n\n  watch(isActive, val => {\n    if (!val) {\n      setTimeout(() => {\n        cursorTarget.value = undefined\n      })\n    }\n  }, { flush: 'post' })\n\n  const activatorRef = ref<HTMLElement>()\n  watchEffect(() => {\n    if (!activatorRef.value) return\n\n    nextTick(() => {\n      activatorEl.value = refElement(activatorRef.value)\n    })\n  })\n\n  const targetRef = ref<HTMLElement>()\n  const target = computed(() => {\n    if (props.target === 'cursor' && cursorTarget.value) return cursorTarget.value\n    if (targetRef.value) return refElement(targetRef.value)\n    return getTarget(props.target, vm) || activatorEl.value\n  })\n  const targetEl = computed(() => {\n    return Array.isArray(target.value)\n      ? undefined\n      : target.value\n  })\n\n  let scope: EffectScope\n  watch(() => !!props.activator, val => {\n    if (val && IN_BROWSER) {\n      scope = effectScope()\n      scope.run(() => {\n        _useActivator(props, vm, { activatorEl, activatorEvents })\n      })\n    } else if (scope) {\n      scope.stop()\n    }\n  }, { flush: 'post', immediate: true })\n\n  onScopeDispose(() => {\n    scope?.stop()\n  })\n\n  return { activatorEl, activatorRef, target, targetEl, targetRef, activatorEvents, contentEvents, scrimEvents }\n}\n\nfunction _useActivator (\n  props: ActivatorProps,\n  vm: ComponentInternalInstance,\n  { activatorEl, activatorEvents }: Pick<ReturnType<typeof useActivator>, 'activatorEl' | 'activatorEvents'>\n) {\n  watch(() => props.activator, (val, oldVal) => {\n    if (oldVal && val !== oldVal) {\n      const activator = getActivator(oldVal)\n      activator && unbindActivatorProps(activator)\n    }\n    if (val) {\n      nextTick(() => bindActivatorProps())\n    }\n  }, { immediate: true })\n\n  watch(() => props.activatorProps, () => {\n    bindActivatorProps()\n  })\n\n  onScopeDispose(() => {\n    unbindActivatorProps()\n  })\n\n  function bindActivatorProps (el = getActivator(), _props = props.activatorProps) {\n    if (!el) return\n\n    bindProps(el, mergeProps(activatorEvents.value, _props))\n  }\n\n  function unbindActivatorProps (el = getActivator(), _props = props.activatorProps) {\n    if (!el) return\n\n    unbindProps(el, mergeProps(activatorEvents.value, _props))\n  }\n\n  function getActivator (selector = props.activator): HTMLElement | undefined {\n    const activator = getTarget(selector, vm)\n\n    // The activator should only be a valid element (Ignore comments and text nodes)\n    activatorEl.value = activator?.nodeType === Node.ELEMENT_NODE ? activator : undefined\n\n    return activatorEl.value\n  }\n}\n\nfunction getTarget<T extends 'parent' | string | Element | ComponentPublicInstance | [x: number, y: number] | undefined> (\n  selector: T,\n  vm: ComponentInternalInstance\n): HTMLElement | undefined | (T extends any[] ? [x: number, y: number] : never) {\n  if (!selector) return\n\n  let target\n  if (selector === 'parent') {\n    let el = vm?.proxy?.$el?.parentNode\n    while (el?.hasAttribute('data-no-activator')) {\n      el = el.parentNode\n    }\n    target = el\n  } else if (typeof selector === 'string') {\n    // Selector\n    target = document.querySelector(selector)\n  } else if ('$el' in selector) {\n    // Component (ref)\n    target = selector.$el\n  } else {\n    // HTMLElement | Element | [x, y]\n    target = selector\n  }\n\n  return target\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}