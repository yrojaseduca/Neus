{"ast":null,"code":"import _toConsumableArray from \"/Applications/XAMPP/xamppfiles/htdocs/neus/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"/Applications/XAMPP/xamppfiles/htdocs/neus/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"/Applications/XAMPP/xamppfiles/htdocs/neus/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Applications/XAMPP/xamppfiles/htdocs/neus/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.reverse.js\";\n// Utilities\nimport { shallowRef, watch } from 'vue';\n\n// Types\n\nexport function useScrolling(listRef, textFieldRef) {\n  var isScrolling = shallowRef(false);\n  var scrollTimeout;\n  function onListScroll(e) {\n    cancelAnimationFrame(scrollTimeout);\n    isScrolling.value = true;\n    scrollTimeout = requestAnimationFrame(function () {\n      scrollTimeout = requestAnimationFrame(function () {\n        isScrolling.value = false;\n      });\n    });\n  }\n  function finishScrolling() {\n    return _finishScrolling.apply(this, arguments);\n  }\n  function _finishScrolling() {\n    _finishScrolling = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return new Promise(function (resolve) {\n              return requestAnimationFrame(resolve);\n            });\n          case 2:\n            _context.next = 4;\n            return new Promise(function (resolve) {\n              return requestAnimationFrame(resolve);\n            });\n          case 4:\n            _context.next = 6;\n            return new Promise(function (resolve) {\n              return requestAnimationFrame(resolve);\n            });\n          case 6:\n            _context.next = 8;\n            return new Promise(function (resolve) {\n              if (isScrolling.value) {\n                var stop = watch(isScrolling, function () {\n                  stop();\n                  resolve();\n                });\n              } else resolve();\n            });\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return _finishScrolling.apply(this, arguments);\n  }\n  function onListKeydown(_x) {\n    return _onListKeydown.apply(this, arguments);\n  }\n  function _onListKeydown() {\n    _onListKeydown = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e) {\n      var _listRef$value;\n      var _textFieldRef$value, el, children, top, _iterator, _step, child, bottom, _iterator2, _step2, _child;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            if (e.key === 'Tab') {\n              (_textFieldRef$value = textFieldRef.value) === null || _textFieldRef$value === void 0 || _textFieldRef$value.focus();\n            }\n            if (['PageDown', 'PageUp', 'Home', 'End'].includes(e.key)) {\n              _context2.next = 3;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 3:\n            el = (_listRef$value = listRef.value) === null || _listRef$value === void 0 ? void 0 : _listRef$value.$el;\n            if (el) {\n              _context2.next = 6;\n              break;\n            }\n            return _context2.abrupt(\"return\");\n          case 6:\n            if (e.key === 'Home' || e.key === 'End') {\n              el.scrollTo({\n                top: e.key === 'Home' ? 0 : el.scrollHeight,\n                behavior: 'smooth'\n              });\n            }\n            _context2.next = 9;\n            return finishScrolling();\n          case 9:\n            children = el.querySelectorAll(':scope > :not(.v-virtual-scroll__spacer)');\n            if (!(e.key === 'PageDown' || e.key === 'Home')) {\n              _context2.next = 32;\n              break;\n            }\n            top = el.getBoundingClientRect().top;\n            _iterator = _createForOfIteratorHelper(children);\n            _context2.prev = 13;\n            _iterator.s();\n          case 15:\n            if ((_step = _iterator.n()).done) {\n              _context2.next = 22;\n              break;\n            }\n            child = _step.value;\n            if (!(child.getBoundingClientRect().top >= top)) {\n              _context2.next = 20;\n              break;\n            }\n            child.focus();\n            return _context2.abrupt(\"break\", 22);\n          case 20:\n            _context2.next = 15;\n            break;\n          case 22:\n            _context2.next = 27;\n            break;\n          case 24:\n            _context2.prev = 24;\n            _context2.t0 = _context2[\"catch\"](13);\n            _iterator.e(_context2.t0);\n          case 27:\n            _context2.prev = 27;\n            _iterator.f();\n            return _context2.finish(27);\n          case 30:\n            _context2.next = 51;\n            break;\n          case 32:\n            bottom = el.getBoundingClientRect().bottom;\n            _iterator2 = _createForOfIteratorHelper(_toConsumableArray(children).reverse());\n            _context2.prev = 34;\n            _iterator2.s();\n          case 36:\n            if ((_step2 = _iterator2.n()).done) {\n              _context2.next = 43;\n              break;\n            }\n            _child = _step2.value;\n            if (!(_child.getBoundingClientRect().bottom <= bottom)) {\n              _context2.next = 41;\n              break;\n            }\n            _child.focus();\n            return _context2.abrupt(\"break\", 43);\n          case 41:\n            _context2.next = 36;\n            break;\n          case 43:\n            _context2.next = 48;\n            break;\n          case 45:\n            _context2.prev = 45;\n            _context2.t1 = _context2[\"catch\"](34);\n            _iterator2.e(_context2.t1);\n          case 48:\n            _context2.prev = 48;\n            _iterator2.f();\n            return _context2.finish(48);\n          case 51:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[13, 24, 27, 30], [34, 45, 48, 51]]);\n    }));\n    return _onListKeydown.apply(this, arguments);\n  }\n  return {\n    onListScroll: onListScroll,\n    onListKeydown: onListKeydown\n  };\n}","map":{"version":3,"names":["shallowRef","watch","useScrolling","listRef","textFieldRef","isScrolling","scrollTimeout","onListScroll","e","cancelAnimationFrame","value","requestAnimationFrame","finishScrolling","_finishScrolling","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","Promise","resolve","stop","onListKeydown","_x","_onListKeydown","_callee2","_listRef$value","_textFieldRef$value","el","children","top","_iterator","_step","child","bottom","_iterator2","_step2","_child","_callee2$","_context2","key","focus","includes","abrupt","$el","scrollTo","scrollHeight","behavior","querySelectorAll","getBoundingClientRect","_createForOfIteratorHelper","s","n","done","t0","f","finish","_toConsumableArray","reverse","t1"],"sources":["../../../src/components/VSelect/useScrolling.ts"],"sourcesContent":["// Utilities\nimport { shallowRef, watch } from 'vue'\n\n// Types\nimport type { Ref } from 'vue'\nimport type { VList } from '@/components/VList'\nimport type { VTextField } from '@/components/VTextField'\n\nexport function useScrolling (listRef: Ref<VList | undefined>, textFieldRef: Ref<VTextField | undefined>) {\n  const isScrolling = shallowRef(false)\n  let scrollTimeout: number\n  function onListScroll (e: Event) {\n    cancelAnimationFrame(scrollTimeout)\n    isScrolling.value = true\n    scrollTimeout = requestAnimationFrame(() => {\n      scrollTimeout = requestAnimationFrame(() => {\n        isScrolling.value = false\n      })\n    })\n  }\n  async function finishScrolling () {\n    await new Promise(resolve => requestAnimationFrame(resolve))\n    await new Promise(resolve => requestAnimationFrame(resolve))\n    await new Promise(resolve => requestAnimationFrame(resolve))\n    await new Promise<void>(resolve => {\n      if (isScrolling.value) {\n        const stop = watch(isScrolling, () => {\n          stop()\n          resolve()\n        })\n      } else resolve()\n    })\n  }\n  async function onListKeydown (e: KeyboardEvent) {\n    if (e.key === 'Tab') {\n      textFieldRef.value?.focus()\n    }\n\n    if (!['PageDown', 'PageUp', 'Home', 'End'].includes(e.key)) return\n    const el: HTMLElement = listRef.value?.$el\n    if (!el) return\n\n    if (e.key === 'Home' || e.key === 'End') {\n      el.scrollTo({\n        top: e.key === 'Home' ? 0 : el.scrollHeight,\n        behavior: 'smooth',\n      })\n    }\n\n    await finishScrolling()\n\n    const children = el.querySelectorAll(':scope > :not(.v-virtual-scroll__spacer)')\n\n    if (e.key === 'PageDown' || e.key === 'Home') {\n      const top = el.getBoundingClientRect().top\n      for (const child of children) {\n        if (child.getBoundingClientRect().top >= top) {\n          (child as HTMLElement).focus()\n          break\n        }\n      }\n    } else {\n      const bottom = el.getBoundingClientRect().bottom\n      for (const child of [...children].reverse()) {\n        if (child.getBoundingClientRect().bottom <= bottom) {\n          (child as HTMLElement).focus()\n          break\n        }\n      }\n    }\n  }\n\n  return { onListScroll, onListKeydown }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}