{"ast":null,"code":"import \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.slice.js\";\n// Composables\nimport { useProxiedModel } from \"../../../composables/proxiedModel.mjs\"; // Utilities\nimport { computed, inject, provide, watch, watchEffect } from 'vue';\nimport { clamp, getCurrentInstance, propsFactory } from \"../../../util/index.mjs\"; // Types\nexport var makeDataTablePaginateProps = propsFactory({\n  page: {\n    type: [Number, String],\n    \"default\": 1\n  },\n  itemsPerPage: {\n    type: [Number, String],\n    \"default\": 10\n  }\n}, 'DataTable-paginate');\nvar VDataTablePaginationSymbol = Symbol[\"for\"]('vuetify:data-table-pagination');\nexport function createPagination(props) {\n  var page = useProxiedModel(props, 'page', undefined, function (value) {\n    return +(value !== null && value !== void 0 ? value : 1);\n  });\n  var itemsPerPage = useProxiedModel(props, 'itemsPerPage', undefined, function (value) {\n    return +(value !== null && value !== void 0 ? value : 10);\n  });\n  return {\n    page: page,\n    itemsPerPage: itemsPerPage\n  };\n}\nexport function providePagination(options) {\n  var page = options.page,\n    itemsPerPage = options.itemsPerPage,\n    itemsLength = options.itemsLength;\n  var startIndex = computed(function () {\n    if (itemsPerPage.value === -1) return 0;\n    return itemsPerPage.value * (page.value - 1);\n  });\n  var stopIndex = computed(function () {\n    if (itemsPerPage.value === -1) return itemsLength.value;\n    return Math.min(itemsLength.value, startIndex.value + itemsPerPage.value);\n  });\n  var pageCount = computed(function () {\n    if (itemsPerPage.value === -1 || itemsLength.value === 0) return 1;\n    return Math.ceil(itemsLength.value / itemsPerPage.value);\n  });\n  watchEffect(function () {\n    if (page.value > pageCount.value) {\n      page.value = pageCount.value;\n    }\n  });\n  function setItemsPerPage(value) {\n    itemsPerPage.value = value;\n    page.value = 1;\n  }\n  function nextPage() {\n    page.value = clamp(page.value + 1, 1, pageCount.value);\n  }\n  function prevPage() {\n    page.value = clamp(page.value - 1, 1, pageCount.value);\n  }\n  function setPage(value) {\n    page.value = clamp(value, 1, pageCount.value);\n  }\n  var data = {\n    page: page,\n    itemsPerPage: itemsPerPage,\n    startIndex: startIndex,\n    stopIndex: stopIndex,\n    pageCount: pageCount,\n    itemsLength: itemsLength,\n    nextPage: nextPage,\n    prevPage: prevPage,\n    setPage: setPage,\n    setItemsPerPage: setItemsPerPage\n  };\n  provide(VDataTablePaginationSymbol, data);\n  return data;\n}\nexport function usePagination() {\n  var data = inject(VDataTablePaginationSymbol);\n  if (!data) throw new Error('Missing pagination!');\n  return data;\n}\nexport function usePaginatedItems(options) {\n  var vm = getCurrentInstance('usePaginatedItems');\n  var items = options.items,\n    startIndex = options.startIndex,\n    stopIndex = options.stopIndex,\n    itemsPerPage = options.itemsPerPage;\n  var paginatedItems = computed(function () {\n    if (itemsPerPage.value <= 0) return items.value;\n    return items.value.slice(startIndex.value, stopIndex.value);\n  });\n  watch(paginatedItems, function (val) {\n    vm.emit('update:currentItems', val);\n  });\n  return {\n    paginatedItems: paginatedItems\n  };\n}","map":{"version":3,"names":["useProxiedModel","computed","inject","provide","watch","watchEffect","clamp","getCurrentInstance","propsFactory","makeDataTablePaginateProps","page","type","Number","String","itemsPerPage","VDataTablePaginationSymbol","Symbol","createPagination","props","undefined","value","providePagination","options","itemsLength","startIndex","stopIndex","Math","min","pageCount","ceil","setItemsPerPage","nextPage","prevPage","setPage","data","usePagination","Error","usePaginatedItems","vm","items","paginatedItems","slice","val","emit"],"sources":["../../../../src/components/VDataTable/composables/paginate.ts"],"sourcesContent":["// Composables\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, inject, provide, watch, watchEffect } from 'vue'\nimport { clamp, getCurrentInstance, propsFactory } from '@/util'\n\n// Types\nimport type { InjectionKey, Ref } from 'vue'\nimport type { Group } from './group'\nimport type { EventProp } from '@/util'\n\nexport const makeDataTablePaginateProps = propsFactory({\n  page: {\n    type: [Number, String],\n    default: 1,\n  },\n  itemsPerPage: {\n    type: [Number, String],\n    default: 10,\n  },\n}, 'DataTable-paginate')\n\nconst VDataTablePaginationSymbol: InjectionKey<{\n  page: Ref<number>\n  itemsPerPage: Ref<number>\n  startIndex: Ref<number>\n  stopIndex: Ref<number>\n  pageCount: Ref<number>\n  itemsLength: Ref<number>\n  prevPage: () => void\n  nextPage: () => void\n  setPage: (value: number) => void\n  setItemsPerPage: (value: number) => void\n}> = Symbol.for('vuetify:data-table-pagination')\n\ntype PaginationProps = {\n  page: number | string\n  'onUpdate:page': EventProp | undefined\n  itemsPerPage: number | string\n  'onUpdate:itemsPerPage': EventProp | undefined\n  itemsLength?: number | string\n}\n\nexport function createPagination (props: PaginationProps) {\n  const page = useProxiedModel(props, 'page', undefined, value => +(value ?? 1))\n  const itemsPerPage = useProxiedModel(props, 'itemsPerPage', undefined, value => +(value ?? 10))\n\n  return { page, itemsPerPage }\n}\n\nexport function providePagination (options: {\n  page: Ref<number>\n  itemsPerPage: Ref<number>\n  itemsLength: Ref<number>\n}) {\n  const { page, itemsPerPage, itemsLength } = options\n\n  const startIndex = computed(() => {\n    if (itemsPerPage.value === -1) return 0\n\n    return itemsPerPage.value * (page.value - 1)\n  })\n  const stopIndex = computed(() => {\n    if (itemsPerPage.value === -1) return itemsLength.value\n\n    return Math.min(itemsLength.value, startIndex.value + itemsPerPage.value)\n  })\n\n  const pageCount = computed(() => {\n    if (itemsPerPage.value === -1 || itemsLength.value === 0) return 1\n\n    return Math.ceil(itemsLength.value / itemsPerPage.value)\n  })\n\n  watchEffect(() => {\n    if (page.value > pageCount.value) {\n      page.value = pageCount.value\n    }\n  })\n\n  function setItemsPerPage (value: number) {\n    itemsPerPage.value = value\n    page.value = 1\n  }\n\n  function nextPage () {\n    page.value = clamp(page.value + 1, 1, pageCount.value)\n  }\n\n  function prevPage () {\n    page.value = clamp(page.value - 1, 1, pageCount.value)\n  }\n\n  function setPage (value: number) {\n    page.value = clamp(value, 1, pageCount.value)\n  }\n\n  const data = { page, itemsPerPage, startIndex, stopIndex, pageCount, itemsLength, nextPage, prevPage, setPage, setItemsPerPage }\n\n  provide(VDataTablePaginationSymbol, data)\n\n  return data\n}\n\nexport function usePagination () {\n  const data = inject(VDataTablePaginationSymbol)\n\n  if (!data) throw new Error('Missing pagination!')\n\n  return data\n}\n\nexport function usePaginatedItems <T> (options: {\n  items: Ref<readonly (T | Group<T>)[]>\n  startIndex: Ref<number>\n  stopIndex: Ref<number>\n  itemsPerPage: Ref<number>\n}) {\n  const vm = getCurrentInstance('usePaginatedItems')\n\n  const { items, startIndex, stopIndex, itemsPerPage } = options\n  const paginatedItems = computed(() => {\n    if (itemsPerPage.value <= 0) return items.value\n\n    return items.value.slice(startIndex.value, stopIndex.value)\n  })\n\n  watch(paginatedItems, val => {\n    vm.emit('update:currentItems', val)\n  })\n\n  return { paginatedItems }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}