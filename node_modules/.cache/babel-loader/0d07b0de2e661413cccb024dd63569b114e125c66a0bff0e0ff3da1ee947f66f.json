{"ast":null,"code":"import _defineProperty from \"/Applications/XAMPP/xamppfiles/htdocs/neus/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.parse-float.js\";\n// Utilities\nimport { computed, onBeforeUnmount, onMounted, shallowRef, watch } from 'vue';\nimport { convertToUnit } from \"../../util/index.mjs\"; // Types\nexport function useSticky(_ref) {\n  var rootEl = _ref.rootEl,\n    isSticky = _ref.isSticky,\n    layoutItemStyles = _ref.layoutItemStyles;\n  var isStuck = shallowRef(false);\n  var stuckPosition = shallowRef(0);\n  var stickyStyles = computed(function () {\n    var side = typeof isStuck.value === 'boolean' ? 'top' : isStuck.value;\n    return [isSticky.value ? {\n      top: 'auto',\n      bottom: 'auto',\n      height: undefined\n    } : undefined, isStuck.value ? _defineProperty({}, side, convertToUnit(stuckPosition.value)) : {\n      top: layoutItemStyles.value.top\n    }];\n  });\n  onMounted(function () {\n    watch(isSticky, function (val) {\n      if (val) {\n        window.addEventListener('scroll', onScroll, {\n          passive: true\n        });\n      } else {\n        window.removeEventListener('scroll', onScroll);\n      }\n    }, {\n      immediate: true\n    });\n  });\n  onBeforeUnmount(function () {\n    window.removeEventListener('scroll', onScroll);\n  });\n  var lastScrollTop = 0;\n  function onScroll() {\n    var _layoutItemStyles$val;\n    var direction = lastScrollTop > window.scrollY ? 'up' : 'down';\n    var rect = rootEl.value.getBoundingClientRect();\n    var layoutTop = parseFloat((_layoutItemStyles$val = layoutItemStyles.value.top) !== null && _layoutItemStyles$val !== void 0 ? _layoutItemStyles$val : 0);\n    var top = window.scrollY - Math.max(0, stuckPosition.value - layoutTop);\n    var bottom = rect.height + Math.max(stuckPosition.value, layoutTop) - window.scrollY - window.innerHeight;\n    var bodyScroll = parseFloat(getComputedStyle(rootEl.value).getPropertyValue('--v-body-scroll-y')) || 0;\n    if (rect.height < window.innerHeight - layoutTop) {\n      isStuck.value = 'top';\n      stuckPosition.value = layoutTop;\n    } else if (direction === 'up' && isStuck.value === 'bottom' || direction === 'down' && isStuck.value === 'top') {\n      stuckPosition.value = window.scrollY + rect.top - bodyScroll;\n      isStuck.value = true;\n    } else if (direction === 'down' && bottom <= 0) {\n      stuckPosition.value = 0;\n      isStuck.value = 'bottom';\n    } else if (direction === 'up' && top <= 0) {\n      if (!bodyScroll) {\n        stuckPosition.value = rect.top + top;\n        isStuck.value = 'top';\n      } else if (isStuck.value !== 'top') {\n        stuckPosition.value = -top + bodyScroll + layoutTop;\n        isStuck.value = 'top';\n      }\n    }\n    lastScrollTop = window.scrollY;\n  }\n  return {\n    isStuck: isStuck,\n    stickyStyles: stickyStyles\n  };\n}","map":{"version":3,"names":["computed","onBeforeUnmount","onMounted","shallowRef","watch","convertToUnit","useSticky","_ref","rootEl","isSticky","layoutItemStyles","isStuck","stuckPosition","stickyStyles","side","value","top","bottom","height","undefined","_defineProperty","val","window","addEventListener","onScroll","passive","removeEventListener","immediate","lastScrollTop","_layoutItemStyles$val","direction","scrollY","rect","getBoundingClientRect","layoutTop","parseFloat","Math","max","innerHeight","bodyScroll","getComputedStyle","getPropertyValue"],"sources":["../../../src/components/VNavigationDrawer/sticky.ts"],"sourcesContent":["// Utilities\nimport { computed, onBeforeUnmount, onMounted, shallowRef, watch } from 'vue'\nimport { convertToUnit } from '@/util'\n\n// Types\nimport type { CSSProperties, Ref } from 'vue'\n\ninterface StickyProps {\n  rootEl: Ref<HTMLElement | undefined>\n  isSticky: Ref<boolean>\n  layoutItemStyles: Ref<CSSProperties>\n}\n\nexport function useSticky ({ rootEl, isSticky, layoutItemStyles }: StickyProps) {\n  const isStuck = shallowRef<boolean | 'top' | 'bottom'>(false)\n  const stuckPosition = shallowRef(0)\n\n  const stickyStyles = computed(() => {\n    const side = typeof isStuck.value === 'boolean' ? 'top' : isStuck.value\n    return [\n      isSticky.value ? { top: 'auto', bottom: 'auto', height: undefined } : undefined,\n      isStuck.value\n        ? { [side]: convertToUnit(stuckPosition.value) }\n        : { top: layoutItemStyles.value.top },\n    ]\n  })\n\n  onMounted(() => {\n    watch(isSticky, val => {\n      if (val) {\n        window.addEventListener('scroll', onScroll, { passive: true })\n      } else {\n        window.removeEventListener('scroll', onScroll)\n      }\n    }, { immediate: true })\n  })\n\n  onBeforeUnmount(() => {\n    window.removeEventListener('scroll', onScroll)\n  })\n\n  let lastScrollTop = 0\n  function onScroll () {\n    const direction = lastScrollTop > window.scrollY ? 'up' : 'down'\n    const rect = rootEl.value!.getBoundingClientRect()\n    const layoutTop = parseFloat(layoutItemStyles.value.top ?? 0)\n    const top = window.scrollY - Math.max(0, stuckPosition.value - layoutTop)\n    const bottom =\n      rect.height +\n      Math.max(stuckPosition.value, layoutTop) -\n      window.scrollY -\n      window.innerHeight\n    const bodyScroll = parseFloat(getComputedStyle(rootEl.value!).getPropertyValue('--v-body-scroll-y')) || 0\n\n    if (rect.height < window.innerHeight - layoutTop) {\n      isStuck.value = 'top'\n      stuckPosition.value = layoutTop\n    } else if (\n      (direction === 'up' && isStuck.value === 'bottom') ||\n      (direction === 'down' && isStuck.value === 'top')\n    ) {\n      stuckPosition.value = window.scrollY + rect.top - bodyScroll\n      isStuck.value = true\n    } else if (direction === 'down' && bottom <= 0) {\n      stuckPosition.value = 0\n      isStuck.value = 'bottom'\n    } else if (direction === 'up' && top <= 0) {\n      if (!bodyScroll) {\n        stuckPosition.value = rect.top + top\n        isStuck.value = 'top'\n      } else if (isStuck.value !== 'top') {\n        stuckPosition.value = -top + bodyScroll + layoutTop\n        isStuck.value = 'top'\n      }\n    }\n\n    lastScrollTop = window.scrollY\n  }\n\n  return { isStuck, stickyStyles }\n}\n"],"mappings":";;AAAA;AACA,SAASA,QAAQ,EAAEC,eAAe,EAAEC,SAAS,EAAEC,UAAU,EAAEC,KAAK,QAAQ,KAAK;AAAA,SACpEC,aAAa,gCAEtB;AASA,OAAO,SAASC,SAASA,CAAAC,IAAA,EAAuD;EAAA,IAAnDC,MAAM,GAA2CD,IAAA,CAAjDC,MAAM;IAAEC,QAAQ,GAAiCF,IAAA,CAAzCE,QAAQ;IAAEC,gBAAA,GAA+BH,IAAA,CAA/BG,gBAAA;EAC7C,IAAMC,OAAO,GAAGR,UAAU,CAA6B,KAAK,CAAC;EAC7D,IAAMS,aAAa,GAAGT,UAAU,CAAC,CAAC,CAAC;EAEnC,IAAMU,YAAY,GAAGb,QAAQ,CAAC,YAAM;IAClC,IAAMc,IAAI,GAAG,OAAOH,OAAO,CAACI,KAAK,KAAK,SAAS,GAAG,KAAK,GAAGJ,OAAO,CAACI,KAAK;IACvE,OAAO,CACLN,QAAQ,CAACM,KAAK,GAAG;MAAEC,GAAG,EAAE,MAAM;MAAEC,MAAM,EAAE,MAAM;MAAEC,MAAM,EAAEC;IAAU,CAAC,GAAGA,SAAS,EAC/ER,OAAO,CAACI,KAAK,GAAAK,eAAA,KACNN,IAAI,EAAGT,aAAa,CAACO,aAAa,CAACG,KAAK,KAC3C;MAAEC,GAAG,EAAEN,gBAAgB,CAACK,KAAK,CAACC;IAAI,CAAC,CACxC;EACH,CAAC,CAAC;EAEFd,SAAS,CAAC,YAAM;IACdE,KAAK,CAACK,QAAQ,EAAE,UAAAY,GAAG,EAAI;MACrB,IAAIA,GAAG,EAAE;QACPC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEC,QAAQ,EAAE;UAAEC,OAAO,EAAE;QAAK,CAAC,CAAC;MAChE,CAAC,MAAM;QACLH,MAAM,CAACI,mBAAmB,CAAC,QAAQ,EAAEF,QAAQ,CAAC;MAChD;IACF,CAAC,EAAE;MAAEG,SAAS,EAAE;IAAK,CAAC,CAAC;EACzB,CAAC,CAAC;EAEF1B,eAAe,CAAC,YAAM;IACpBqB,MAAM,CAACI,mBAAmB,CAAC,QAAQ,EAAEF,QAAQ,CAAC;EAChD,CAAC,CAAC;EAEF,IAAII,aAAa,GAAG,CAAC;EACrB,SAASJ,QAAQA,CAAA,EAAI;IAAA,IAAAK,qBAAA;IACnB,IAAMC,SAAS,GAAGF,aAAa,GAAGN,MAAM,CAACS,OAAO,GAAG,IAAI,GAAG,MAAM;IAChE,IAAMC,IAAI,GAAGxB,MAAM,CAACO,KAAK,CAAEkB,qBAAqB,CAAC,CAAC;IAClD,IAAMC,SAAS,GAAGC,UAAU,EAAAN,qBAAA,GAACnB,gBAAgB,CAACK,KAAK,CAACC,GAAG,cAAAa,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC;IAC7D,IAAMb,GAAG,GAAGM,MAAM,CAACS,OAAO,GAAGK,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEzB,aAAa,CAACG,KAAK,GAAGmB,SAAS,CAAC;IACzE,IAAMjB,MAAM,GACVe,IAAI,CAACd,MAAM,GACXkB,IAAI,CAACC,GAAG,CAACzB,aAAa,CAACG,KAAK,EAAEmB,SAAS,CAAC,GACxCZ,MAAM,CAACS,OAAO,GACdT,MAAM,CAACgB,WAAW;IACpB,IAAMC,UAAU,GAAGJ,UAAU,CAACK,gBAAgB,CAAChC,MAAM,CAACO,KAAM,CAAC,CAAC0B,gBAAgB,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC;IAEzG,IAAIT,IAAI,CAACd,MAAM,GAAGI,MAAM,CAACgB,WAAW,GAAGJ,SAAS,EAAE;MAChDvB,OAAO,CAACI,KAAK,GAAG,KAAK;MACrBH,aAAa,CAACG,KAAK,GAAGmB,SAAS;IACjC,CAAC,MAAM,IACJJ,SAAS,KAAK,IAAI,IAAInB,OAAO,CAACI,KAAK,KAAK,QAAQ,IAChDe,SAAS,KAAK,MAAM,IAAInB,OAAO,CAACI,KAAK,KAAK,KAAM,EACjD;MACAH,aAAa,CAACG,KAAK,GAAGO,MAAM,CAACS,OAAO,GAAGC,IAAI,CAAChB,GAAG,GAAGuB,UAAU;MAC5D5B,OAAO,CAACI,KAAK,GAAG,IAAI;IACtB,CAAC,MAAM,IAAIe,SAAS,KAAK,MAAM,IAAIb,MAAM,IAAI,CAAC,EAAE;MAC9CL,aAAa,CAACG,KAAK,GAAG,CAAC;MACvBJ,OAAO,CAACI,KAAK,GAAG,QAAQ;IAC1B,CAAC,MAAM,IAAIe,SAAS,KAAK,IAAI,IAAId,GAAG,IAAI,CAAC,EAAE;MACzC,IAAI,CAACuB,UAAU,EAAE;QACf3B,aAAa,CAACG,KAAK,GAAGiB,IAAI,CAAChB,GAAG,GAAGA,GAAG;QACpCL,OAAO,CAACI,KAAK,GAAG,KAAK;MACvB,CAAC,MAAM,IAAIJ,OAAO,CAACI,KAAK,KAAK,KAAK,EAAE;QAClCH,aAAa,CAACG,KAAK,GAAG,CAACC,GAAG,GAAGuB,UAAU,GAAGL,SAAS;QACnDvB,OAAO,CAACI,KAAK,GAAG,KAAK;MACvB;IACF;IAEAa,aAAa,GAAGN,MAAM,CAACS,OAAO;EAChC;EAEA,OAAO;IAAEpB,OAAO,EAAPA,OAAO;IAAEE,YAAA,EAAAA;EAAa,CAAC;AAClC"},"metadata":{},"sourceType":"module","externalDependencies":[]}