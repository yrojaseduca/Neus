{"ast":null,"code":"import _objectSpread from \"/Applications/XAMPP/xamppfiles/htdocs/neus/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { Fragment as _Fragment, createVNode as _createVNode } from \"vue\";\n// Styles\nimport \"./VVirtualScroll.css\";\n\n// Components\nimport { VVirtualScrollItem } from \"./VVirtualScrollItem.mjs\"; // Composables\nimport { makeComponentProps } from \"../../composables/component.mjs\";\nimport { makeDimensionProps, useDimension } from \"../../composables/dimensions.mjs\";\nimport { useToggleScope } from \"../../composables/toggleScope.mjs\";\nimport { makeVirtualProps, useVirtual } from \"../../composables/virtual.mjs\"; // Utilities\nimport { onMounted, onScopeDispose, toRef } from 'vue';\nimport { convertToUnit, genericComponent, getCurrentInstance, getScrollParent, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\nexport var makeVVirtualScrollProps = propsFactory(_objectSpread(_objectSpread(_objectSpread({\n  items: {\n    type: Array,\n    \"default\": function _default() {\n      return [];\n    }\n  },\n  renderless: Boolean\n}, makeVirtualProps()), makeComponentProps()), makeDimensionProps()), 'VVirtualScroll');\nexport var VVirtualScroll = genericComponent()({\n  name: 'VVirtualScroll',\n  props: makeVVirtualScrollProps(),\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var vm = getCurrentInstance('VVirtualScroll');\n    var _useDimension = useDimension(props),\n      dimensionStyles = _useDimension.dimensionStyles;\n    var _useVirtual = useVirtual(props, toRef(props, 'items')),\n      containerRef = _useVirtual.containerRef,\n      markerRef = _useVirtual.markerRef,\n      handleScroll = _useVirtual.handleScroll,\n      handleScrollend = _useVirtual.handleScrollend,\n      handleItemResize = _useVirtual.handleItemResize,\n      scrollToIndex = _useVirtual.scrollToIndex,\n      paddingTop = _useVirtual.paddingTop,\n      paddingBottom = _useVirtual.paddingBottom,\n      computedItems = _useVirtual.computedItems;\n    useToggleScope(function () {\n      return props.renderless;\n    }, function () {\n      function handleListeners() {\n        var add = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n        var method = add ? 'addEventListener' : 'removeEventListener';\n        if (containerRef.value === document.documentElement) {\n          document[method]('scroll', handleScroll, {\n            passive: true\n          });\n          document[method]('scrollend', handleScrollend);\n        } else {\n          var _containerRef$value, _containerRef$value2;\n          (_containerRef$value = containerRef.value) === null || _containerRef$value === void 0 || _containerRef$value[method]('scroll', handleScroll, {\n            passive: true\n          });\n          (_containerRef$value2 = containerRef.value) === null || _containerRef$value2 === void 0 || _containerRef$value2[method]('scrollend', handleScrollend);\n        }\n      }\n      onMounted(function () {\n        containerRef.value = getScrollParent(vm.vnode.el, true);\n        handleListeners(true);\n      });\n      onScopeDispose(handleListeners);\n    });\n    useRender(function () {\n      var children = computedItems.value.map(function (item) {\n        return _createVNode(VVirtualScrollItem, {\n          \"key\": item.index,\n          \"renderless\": props.renderless,\n          \"onUpdate:height\": function onUpdateHeight(height) {\n            return handleItemResize(item.index, height);\n          }\n        }, {\n          \"default\": function _default(slotProps) {\n            var _slots$default;\n            return (_slots$default = slots[\"default\"]) === null || _slots$default === void 0 ? void 0 : _slots$default.call(slots, _objectSpread({\n              item: item.raw,\n              index: item.index\n            }, slotProps));\n          }\n        });\n      });\n      return props.renderless ? _createVNode(_Fragment, null, [_createVNode(\"div\", {\n        \"ref\": markerRef,\n        \"class\": \"v-virtual-scroll__spacer\",\n        \"style\": {\n          paddingTop: convertToUnit(paddingTop.value)\n        }\n      }, null), children, _createVNode(\"div\", {\n        \"class\": \"v-virtual-scroll__spacer\",\n        \"style\": {\n          paddingBottom: convertToUnit(paddingBottom.value)\n        }\n      }, null)]) : _createVNode(\"div\", {\n        \"ref\": containerRef,\n        \"class\": ['v-virtual-scroll', props[\"class\"]],\n        \"onScrollPassive\": handleScroll,\n        \"onScrollend\": handleScrollend,\n        \"style\": [dimensionStyles.value, props.style]\n      }, [_createVNode(\"div\", {\n        \"ref\": markerRef,\n        \"class\": \"v-virtual-scroll__container\",\n        \"style\": {\n          paddingTop: convertToUnit(paddingTop.value),\n          paddingBottom: convertToUnit(paddingBottom.value)\n        }\n      }, [children])]);\n    });\n    return {\n      scrollToIndex: scrollToIndex\n    };\n  }\n});","map":{"version":3,"names":["VVirtualScrollItem","makeComponentProps","makeDimensionProps","useDimension","useToggleScope","makeVirtualProps","useVirtual","onMounted","onScopeDispose","toRef","convertToUnit","genericComponent","getCurrentInstance","getScrollParent","propsFactory","useRender","makeVVirtualScrollProps","_objectSpread","items","type","Array","_default","renderless","Boolean","VVirtualScroll","name","props","setup","_ref","slots","vm","_useDimension","dimensionStyles","_useVirtual","containerRef","markerRef","handleScroll","handleScrollend","handleItemResize","scrollToIndex","paddingTop","paddingBottom","computedItems","handleListeners","add","arguments","length","undefined","method","value","document","documentElement","passive","_containerRef$value","_containerRef$value2","vnode","el","children","map","item","_createVNode","index","onUpdateHeight","height","slotProps","_slots$default","call","raw","_Fragment","style"],"sources":["../../../src/components/VVirtualScroll/VVirtualScroll.tsx"],"sourcesContent":["// Styles\nimport './VVirtualScroll.sass'\n\n// Components\nimport { VVirtualScrollItem } from './VVirtualScrollItem'\n\n// Composables\nimport { makeComponentProps } from '@/composables/component'\nimport { makeDimensionProps, useDimension } from '@/composables/dimensions'\nimport { useToggleScope } from '@/composables/toggleScope'\nimport { makeVirtualProps, useVirtual } from '@/composables/virtual'\n\n// Utilities\nimport { onMounted, onScopeDispose, toRef } from 'vue'\nimport {\n  convertToUnit,\n  genericComponent,\n  getCurrentInstance,\n  getScrollParent,\n  propsFactory,\n  useRender,\n} from '@/util'\n\n// Types\nimport type { PropType, Ref } from 'vue'\nimport type { GenericProps } from '@/util'\n\nexport interface VVirtualScrollSlot<T> {\n  item: T\n  index: number\n}\n\nexport const makeVVirtualScrollProps = propsFactory({\n  items: {\n    type: Array as PropType<readonly unknown[]>,\n    default: () => ([]),\n  },\n  renderless: Boolean,\n\n  ...makeVirtualProps(),\n  ...makeComponentProps(),\n  ...makeDimensionProps(),\n}, 'VVirtualScroll')\n\nexport const VVirtualScroll = genericComponent<new <T, Renderless extends boolean = false>(\n  props: {\n    items?: readonly T[]\n    renderless?: Renderless\n  },\n  slots: {\n    default: VVirtualScrollSlot<T> & (Renderless extends true ? {\n      itemRef: Ref<HTMLElement | undefined>\n    } : {})\n  }\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VVirtualScroll',\n\n  props: makeVVirtualScrollProps(),\n\n  setup (props, { slots }) {\n    const vm = getCurrentInstance('VVirtualScroll')\n    const { dimensionStyles } = useDimension(props)\n    const {\n      containerRef,\n      markerRef,\n      handleScroll,\n      handleScrollend,\n      handleItemResize,\n      scrollToIndex,\n      paddingTop,\n      paddingBottom,\n      computedItems,\n    } = useVirtual(props, toRef(props, 'items'))\n\n    useToggleScope(() => props.renderless, () => {\n      function handleListeners (add = false) {\n        const method = add ? 'addEventListener' : 'removeEventListener'\n\n        if (containerRef.value === document.documentElement) {\n          document[method]('scroll', handleScroll, { passive: true })\n          document[method]('scrollend', handleScrollend)\n        } else {\n          containerRef.value?.[method]('scroll', handleScroll, { passive: true })\n          containerRef.value?.[method]('scrollend', handleScrollend)\n        }\n      }\n\n      onMounted(() => {\n        containerRef.value = getScrollParent(vm.vnode.el as HTMLElement, true)\n        handleListeners(true)\n      })\n      onScopeDispose(handleListeners)\n    })\n\n    useRender(() => {\n      const children = computedItems.value.map(item => (\n        <VVirtualScrollItem\n          key={ item.index }\n          renderless={ props.renderless }\n          onUpdate:height={ height => handleItemResize(item.index, height) }\n        >\n          { slotProps => slots.default?.({ item: item.raw, index: item.index, ...slotProps }) }\n        </VVirtualScrollItem>\n      ))\n\n      return props.renderless ? (\n        <>\n          <div ref={ markerRef } class=\"v-virtual-scroll__spacer\" style={{ paddingTop: convertToUnit(paddingTop.value) }} />\n          { children }\n          <div class=\"v-virtual-scroll__spacer\" style={{ paddingBottom: convertToUnit(paddingBottom.value) }} />\n        </>\n      ) : (\n        <div\n          ref={ containerRef }\n          class={[\n            'v-virtual-scroll',\n            props.class,\n          ]}\n          onScrollPassive={ handleScroll }\n          onScrollend={ handleScrollend }\n          style={[\n            dimensionStyles.value,\n            props.style,\n          ]}\n        >\n          <div\n            ref={ markerRef }\n            class=\"v-virtual-scroll__container\"\n            style={{\n              paddingTop: convertToUnit(paddingTop.value),\n              paddingBottom: convertToUnit(paddingBottom.value),\n            }}\n          >\n            { children }\n          </div>\n        </div>\n      )\n    })\n\n    return {\n      scrollToIndex,\n    }\n  },\n})\n\nexport type VVirtualScroll = InstanceType<typeof VVirtualScroll>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}